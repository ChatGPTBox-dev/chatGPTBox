# ChatGPTBox v2.5.8 以来的变更总结

## 项目概览
- **项目名称**: ChatGPTBox
- **起始版本**: v2.5.8 (2024-08-08)
- **当前版本**: v2.5.8-18-g8825a70 (2025-02-01)
- **总提交数**: 18个提交
- **主要贡献者**: Peter Dave Hello, Taewan Park, josc146

## 📊 变更统计
- **变更文件数**: 23个文件
- **代码增加**: +299行
- **代码删除**: -209行
- **净增长**: +90行

## 🚀 主要新功能

### 1. AI模型支持扩展

#### OpenAI GPT-4.1 系列 (提交: cf176da, 2025-04-15)
- 新增 `gpt-4.1` 模型
- 新增 `gpt-4.1-mini` 模型  
- 新增 `gpt-4.1-nano` 模型
- 参考文档: https://openai.com/index/gpt-4-1/

#### OpenAI ChatGPT-4o-Latest (提交: 86940f6, 2024-08-14)
- 新增 `chatgpt-4o-latest` 动态模型
- 支持最新的OpenAI动态模型更新

#### Claude 3.5 和 Claude 4 系列 (提交: a5b6d57, 2025-06-03)
- **Claude 3.5 Haiku**: `claude-3-5-haiku-20241022`
- **Claude 3.5 Sonnet 更新**: 升级到 `claude-3-5-sonnet-20241022`
- **Claude 3.7 Sonnet**: 新增支持
- **Claude 4 Sonnet**: `claude-4-sonnet`
- **Claude 4 Opus**: `claude-4-opus`

### 2. API功能增强

#### Anthropic API网站请求支持 (提交: f328ea0, 2024-12-14)
- 允许Anthropic API在网站中发送请求
- 增强了Claude API的使用场景

## 🔧 改进和优化

### 1. 内置Prompt强化 (PR #866, 2025-06-08)
全面升级了所有内置提示词的质量和专业性：

#### 选择工具提示词改进
- **翻译工具**: 增加专业译者角色，保持语调和格式
- **代码解释**: 高级软件工程师角色，逐步分解和设计理念说明
- **总结工具**: 专业总结师角色，突出关键点
- **润色工具**: 技能编辑角色，语法和流畅性改进
- **情感分析**: 专家角色，简洁的情感标签
- **段落分割**: 技能编辑角色，易读性优化
- **问答工具**: 简洁回答和短解释

#### 网站适配器提示词升级
- **arXiv**: 学术论文分析助手，结构化摘要
- **Bilibili**: 专家视频总结，Markdown格式
- **GitHub**: 专家级讨论分析，结构化Markdown
- **GitLab**: 高级工程师代码审查
- **YouTube**: 专家视频总结
- **知乎/微信/Reddit等**: 专业内容分析师角色

### 2. 稳定性修复

#### 防止Readability解析器崩溃 (PR #865, 2025-06-08)
- 添加 `article.textContent` 空值检查
- 改进错误处理机制
- 使用 `const` 替代 `let` 提高代码质量

### 3. 安全更新

#### 依赖项安全更新 (提交: 8825a70, 2025-02-01)
- 更新 `package-lock.json` 解决安全漏洞
- 手动更新 `elliptic` 到 v6.5.7 (提交: b51edb7, 2024-08-14)

## 📝 详细变更记录

### 配置文件更新 (`src/config/index.mjs`)
```javascript
// 新增模型配置
chatgptApiModelKeys: [
  // ... 现有模型
  'chatgptApi4oLatest',      // 新增
  'chatgptApi4_1',           // 新增  
  'chatgptApi4_1_mini',      // 新增
  'chatgptApi4_1_nano',      // 新增
]

claudeApiModelKeys: [
  // ... 现有模型
  'claude35HaikuApi',        // 新增
  'claude37SonnetApi',       // 新增
  'claudeOpus4Api',          // 新增
  'claudeSonnet4Api',        // 新增
]
```

### 核心功能修复 (`src/utils/get-core-content-text.mjs`)
```javascript
// 修复前
return postProcessText(article.textContent)

// 修复后  
if (article?.textContent) {
  console.log('readerable: successfully extracted content')
  return postProcessText(article.textContent)
} else {
  console.log('readerable: parsing failed despite probability check')
}
```

## 🔄 版本管理信息
- **标签**: v2.5.8 (ca8d020)
- **分支**: cursor/v2-5-8-5669, origin/master, origin/HEAD, master
- **提交哈希**: 8825a70 (HEAD)
- **自动化发布**: 由 github-actions[bot] 处理

## 📈 影响评估

### 用户体验改进
1. **更丰富的AI模型选择**: 支持最新的GPT-4.1和Claude 4系列
2. **更专业的内容生成**: 全面升级的提示词提供更高质量的输出
3. **更稳定的服务**: 修复了关键的解析器崩溃问题

### 开发者体验
1. **安全性提升**: 依赖项安全更新
2. **代码质量**: 改进的错误处理和变量声明
3. **可维护性**: 更清晰的提示词结构

### 技术债务
1. **依赖项管理**: 持续的安全更新需求
2. **提示词维护**: 多语言支持的复杂性

## 🔮 后续发展方向
基于这些变更，项目展现出以下发展趋势：
1. **AI模型生态扩展**: 持续集成最新的AI模型
2. **用户体验优化**: 不断改进提示词质量
3. **稳定性提升**: 持续的错误修复和安全更新
4. **国际化支持**: 多语言和多平台适配

---
*文档生成时间: 2025-02-01*  
*基于提交: 8825a70*